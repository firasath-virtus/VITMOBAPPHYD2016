<div class="dist-style  minheight-500">

  <div class=" row justify-content-between distIcon-style">
    <div class="col-md-2  col-sm-2  col-lg-2 left">
      <h4>
        <i class="fa fa-credit-card" aria-hidden="true"></i> Payments</h4>
    </div>
    <div class="col-sm-2 col-md-2 col-lg-2 align-self-center right">
      <a class="cursor logo-color mgleft-10">
        <i aria-hidden="true" class="fa fa-sliders logo-color" (click)="filterToggle()" title="Filter"></i>

        <div class="filterView" *ngIf="showFilterDialog">
          <div class="">
            <b class="float-left">Filter By</b>
            <br>
            <div class=" ">
              <md-form-field class="example-full-width">
                <input class="form-control" mdInput placeholder="search text" [(ngModel)]="searchPaymentTerm" (ngModelChange)="searchPayment()"
                  name="searchPaymentTerm">
              </md-form-field>
            </div>
          </div>
        </div>
      </a>

    </div>

  </div>


  <div class="container-fluid">

    <div class="tab tabs-left row">
      <div class="col-2">

        <table class="nav nav-pills flex-column row">
          <tr>
            <td class="nav-item" (click)="viewTabpanel('cod')">
              <a class="nav-link" [ngClass]="{'active': tabPanelView === 'cod'}" href="javascript:void(0)">
                <i class="fa fa-money" aria-hidden="true"></i>
                <br> Cash on delivery </a>
            </td>
          </tr>
          <tr>
            <td class="nav-item" (click)="viewTabpanel('credit')">
              <a class="nav-link" [ngClass]="{'active': tabPanelView === 'credit'}" href="javascript:void(0)">
                <i class="fa fa-credit-card" aria-hidden="true"></i>
                <br> Credit </a>
            </td>
          </tr>
          <tr>
              <td class="nav-item" (click)="viewTabpanel('advamount')">
                <a class="nav-link" [ngClass]="{'active': tabPanelView === 'advamount'}" href="javascript:void(0)">
                  <i class="fa fa-inr" aria-hidden="true"></i>
                  <br> Advance amount </a>
              </td>
            </tr>

          <!-- <tr>
            <td class="nav-item" (click)="viewTabpanel('bill')">
              <a class="nav-link" [ngClass]="{'active': tabPanelView === 'bill'}" href="javascript:void(0)">
                <i class="fa fa-bars" aria-hidden="true"></i>
                <br> Bill </a>
            </td>
          </tr>
          <tr>
            <td class="nav-item" (click)="viewTabpanel('collections')">
              <a class="nav-link" [ngClass]="{'active': tabPanelView === 'collections'}" href="javascript:void(0)">
                <i class="fa fa-briefcase" aria-hidden="true"></i>
                <br> Collections
              </a>
            </td>
          </tr> -->
        </table>
      </div>

      <div class="tab-content col  pdtop-15" *ngIf="tabPanelView == 'cod'">
        <div class=" ">
            <ul class="cbp_tmtimeline">
                <li *ngFor="let payments of codPayments" >
                  <time class="cbp_tmtime" ><span>      
                      {{payments.modifieddate | utcDate}} </span>
                     <span> #{{payments.orderid}}</span></time>
                     <div class="cbp_tmicon cbp_tmicon-check"  *ngIf="payments.status=='confirm'">
                            <i class="fa fa-check   fs-20" aria-hidden="true"></i>
      
                    </div>
                    <div class="cbp_tmicon cbp_tmicon-times" *ngIf="payments.status=='rejected'">
                            <i class="fa fa-times   fs-20" aria-hidden="true"></i>
                    </div>

            <div class="cbp_tmicon cbp_tmicon-favourite" *ngIf="payments.status=='received'">
                    <i class="fa fa-heart  fs-20" aria-hidden="true"></i>
            </div>
            <!-- <div class="cbp_tmicon cbp_tmicon-favourite">  <i class="fa fa-heart" aria-hidden="true"></i></div> -->
                  
                  <div class="cbp_tmlabel left">
  
                        <div class="mgbottom-10">
                          <b> Dealer/Super-Supplier have {{payments.status}}ed Payment</b>
                          <br>
                          <small ca> Customer: {{payments.customer.firstname}} {{payments.customer.lastname}} have paid the amount of INR {{payments.amount_received}}
                            to Dealer/Supplier: {{payments.dealer.firstname}} {{payments.dealer.lastname}} </small>
                          <div *ngIf="payments.status=='rejected'" class="mgbottom-10">
                            <small> Rejected By: {{payments.dealer.firstname}} {{payments.dealer.lastname}} </small>
                          </div>
                        </div>
          
                        <div *ngIf="payments.status=='received'">
                          <md-dialog-actions align="end">
                            <button md-raised-button class="btn-primary btn-small" (click)="changeStatus('confirm',payments)">CONFIRM</button>
                            <button md-raised-button class="btn-small" (click)="changeStatus('rejected',payments)">REJECT</button>&nbsp;
                          </md-dialog-actions>
                        </div>      </div>
                </li>
              </ul>
          <ul class="scrollheight  mgtop-5">
            <li class="nolist-style  messages-style" *ngFor="let payments of codPayments">
              <div *ngIf="payments.status=='confirm'">
                <i class="fa fa-check-circle success fs-24" aria-hidden="true"></i>
              </div>
              <div *ngIf="payments.status=='rejected'">
                <i class="fa fa-times-circle danger fs-24" aria-hidden="true"></i>
              </div>
              <div *ngIf="payments.status=='received'">
                <i class="fa fa-gratipay warning fs-24" aria-hidden="true"></i>
              </div>
              <div class="mgbottom-10">
                <b> Dealer/Super-Supplier have {{payments.status}}ed Payment</b>
                <br>
                <small ca> Customer: {{payments.customer.firstname}} {{payments.customer.lastname}} have paid the amount of INR {{payments.amount_received}}
                  to Dealer/Supplier: {{payments.dealer.firstname}} {{payments.dealer.lastname}} </small>
                <div *ngIf="payments.status=='rejected'" class="mgbottom-10">
                  <small> Rejected By: {{payments.dealer.firstname}} {{payments.dealer.lastname}} </small>
                </div>
              </div>

              <div *ngIf="payments.status=='received'">
                <md-dialog-actions align="end">
                  <button md-raised-button class="btn-primary btn-small" (click)="changeStatus('confirm',payments)">CONFIRM</button>
                  <button md-raised-button class="btn-small" (click)="changeStatus('rejected',payments)">REJECT</button>&nbsp;
                </md-dialog-actions>
              </div>
              <div class="row dateview-style">
                <small class="col-6 gray9">
                  <i class="fa fa-calendar" aria-hidden="true"></i>
                  {{payments.modifieddate | utcDate}} </small>
                <small class="col-6 gray9">Order ID: #{{payments.orderid}}</small>
              </div>
            </li>

          </ul>
        </div>
      </div>


      <div class="tab-content col  pdtop-15" *ngIf="tabPanelView == 'credit'">
         
        <ul class="cbp_tmtimeline">
            <li *ngFor="let credit of creditPayments">
              <time class="cbp_tmtime" ><span>      
                {{credit.modifieddate | utcDate }} </span>
                 <span> #{{credit.orderid}}</span></time>
        <div class="cbp_tmicon cbp_tmicon-favourite"><i class="fa fa-check" aria-hidden="true"></i></div>
        <!-- <div class="cbp_tmicon cbp_tmicon-favourite">  <i class="fa fa-heart" aria-hidden="true"></i></div> -->
              
              <div class="cbp_tmlabel left">
                      <b> Customer have done the Payment</b>
                      <br>
                      <small *ngIf="credit.customer"> Customer: {{credit.customer.firstname}} {{credit.customer.lastname}} have paid the amount of INR {{credit.amount_received}}
                        to Dealer/Supplier:{{credit.dealer.firstname}}{{credit.dealer.lastname}}</small>
              </div>
            </li>
          </ul>
        </div>

        <div class="tab-content col pdtop-15" *ngIf="tabPanelView == 'advamount'">
            <ul class="cbp_tmtimeline">
                <li *ngFor="let advance of advAmount">
                  <time class="cbp_tmtime" ><span>  
                   {{advance.createddate | utcDate}}   
                    </span>
                     <span># {{advance.orderid}}</span></time>
            <div class="cbp_tmicon cbp_tmicon-favourite"><i class="fa fa-check" aria-hidden="true"></i></div>
            <!-- <div class="cbp_tmicon cbp_tmicon-favourite">  <i class="fa fa-heart" aria-hidden="true"></i></div> -->
                  
                  <div class="cbp_tmlabel left">
                          <b> Customer have paid the advance amount</b>
                          <br>
                          <small> Customer: {{advance.fname}} {{advance.lname}} have paid the advance amount of INR. {{advance.advance_amount}} to Dealer/Supplier:</small>
                  </div>
                </li>
              </ul>

        </div>


        
          <!-- <ul class="scrollheight  mgtop-5">
            <li class="nolist-style  messages-style" *ngFor="let credit of creditPayments">
              <div>
                <i class="fa fa-check-circle success fs-24" aria-hidden="true"></i>
              </div>
              <div class="mgbottom-10">
                <b> Customer have done the Payment</b>
                <br>
                <small *ngIf="credit.customer"> Customer: {{credit.customer.firstname}} {{credit.customer.lastname}} have paid the amount of INR {{credit.amount_received}}
                  to Dealer/Supplier:{{credit.dealer.firstname}}{{credit.dealer.lastname}}</small>
              </div>

              <div class="row dateview-style">
                <small class="col-6 gray9">
                  <i class="fa fa-calendar" aria-hidden="true"></i>
                  {{credit.modifieddate | utcDate }} </small>
                <small class="col-6 gray9">Order ID: # Order ID:{{credit.orderid}}</small>
              </div>
            </li>

          </ul> -->

      
      <!-- <div class="tab-content col  pdtop-15" *ngIf="tabPanelView == 'bill'">
        Bill table

        <ul class="cbp_tmtimeline">
          <li>
            <time class="cbp_tmtime" datetime="2013-04-10 18:30"><span>4/10/13</span> <span>18:30</span></time>
      <div class="cbp_tmicon cbp_tmicon-favourite"><i class="fa fa-check" aria-hidden="true"></i></div> -->
      <!-- <div class="cbp_tmicon cbp_tmicon-favourite">  <i class="fa fa-heart" aria-hidden="true"></i></div> -->
            <!-- <div class="cbp_tmicon cbp_tmicon-check"></div>  -->
            
            <!-- <div class="cbp_tmlabel">
              <h4>Ricebean black-eyed pea</h4>
              <p>Winter purslane...</p>
            </div>
          </li>
        </ul>
      </div> -->



      <!-- <div class="tab-content col  pdtop-15" *ngIf="tabPanelView == 'collections'">
        <div class=" ">
          <ul class="scrollheight  mgtop-5">
            <li class="nolist-style  messages-style" *ngFor="let collection of collections">
              <div>
                <span *ngIf="collection.status=='confirm' || 'received'">
                  <i class="fa fa-check-circle success fs-24" aria-hidden="true"></i>
                </span>
                <br>
                <small class="gray9"> <i class="fa fa-calendar"></i> {{collection.modifieddate | utcDate}}</small>   <br>
                <b class="capital ng-binding"> INR. {{collection.amount}}
                </b>
                <br>
              <small>Payment Type : COD</small>
                  </div> -->
                  <!-- <div class="row">
                      <div class="col-6 gray9"> <i class="fa fa-calendar"></i> <small> {{collection.modifieddate | utcDate}}</small>  </div>
                      <div class="col-6"> <small>Payment Type : COD</small></div>
                    </div> -->
            <!-- </li>

          </ul>
        </div>
      </div> -->

    </div>
  </div>
</div>
