<div class=" dist-style minheight-500">
  <div class=" row justify-content-between distIcon-style left">
    <div class="col-2 align-self-center">
      <h4>
        <i class="fa fa-sitemap"></i> Distributor</h4>
      <!-- <button class="" md-raised-button (click)="quickFilter()" >CATEGORY</button> -->
    </div>

    <div class="col-2 align-self-center">
      <h5 cass="" *ngIf="distributorsCount != 0">Count :
        <span class="warning">{{this.distributorsCount}}</span>
      </h5>
    </div>

    <div class="col align-self-center">
      <div class="row justify-content-end">
        <div class="col-4">
          <md-select placeholder="Filter By" name="type" class="full-width left" [(ngModel)]="filterType">
            <md-option value="name">First Name</md-option>
            <md-option value="mobileno">Mobile Number</md-option>
            <md-option value="category">Category</md-option>
            <md-option value="phonetype">Type of phone</md-option>
            <md-option value="address">Area Name</md-option>
            <md-option value="areadefined">Is Area defined</md-option>
            <md-option value="products">Products</md-option>
            <md-option value="stockpoints">Is Stockpoint defined</md-option>
            <md-option value="salesteamassociation">Associated To</md-option>
          </md-select>
        </div>

        <div class="col-5" *ngIf="filterType=='name'">
          <md-form-field class="example-full-width">
            <input class="form-control" mdInput placeholder="Enter First Name" [(ngModel)]="filterTypeModel.firstname" name="firstname">
          </md-form-field>
        </div>

        <div class="col-5" *ngIf="filterType=='mobileno'">
          <md-form-field class="example-full-width">
            <input class="form-control" mdInput placeholder="Enter Customer Mobile Number" [(ngModel)]="filterTypeModel.mobileno" name="mobileno"
              maxlength="10">
          </md-form-field>
        </div>

        <div class="col-5" *ngIf="filterType == 'category'">
          <md-form-field class="example-full-width">
            <input mdInput placeholder="Enter Category" aria-label="State" [mdAutocomplete]="auto" [formControl]="CategoryCtrl">
            <md-autocomplete #auto="mdAutocomplete">
              <md-option *ngFor="let cat of filteredcategories | async" [value]="cat.category">
                <span> {{cat.category}}</span>
              </md-option>
            </md-autocomplete>
          </md-form-field>
        </div>

        <div class="col-5" *ngIf="filterType == 'phonetype'">
          <md-select placeholder="Type of phone" class="wd-100pc left" name="phonetype" [(ngModel)]="filterTypeModel.typeofphone">
            <md-option value="no_smartphone">No Smartphone</md-option>
            <md-option value="android">Android</md-option>
            <md-option value="ios">Iphone</md-option>
          </md-select>
        </div>

        <div class="col-5" *ngIf="filterType == 'address'">
          <md-form-field class="example-full-width">
            <input class="form-control" mdInput placeholder="Enter Area Name" [(ngModel)]="filterTypeModel.address" name="searchArea">
          </md-form-field>
        </div>

        <div class="col-5" *ngIf="filterType == 'salesteamassociation'">
          <md-form-field class="example-full-width">
            <input mdInput placeholder="Enter sales team name" aria-label="State" [mdAutocomplete]="auto" [formControl]="salesTeamCtrl">
            <md-autocomplete #auto="mdAutocomplete">
              <md-option *ngFor="let salesteam of filteredsalesteam | async" [value]="salesteam.fullname">
                <span> {{salesteam.fullname}}</span>
              </md-option>
            </md-autocomplete>
          </md-form-field>
        </div>

        <div class="col-5" *ngIf="filterType == 'areadefined'">
          <md-select placeholder="Please select" [(ngModel)]="filterTypeModel.isAreaDefined">
            <md-option value="yes">YES</md-option>
            <md-option value="no">NO</md-option>
          </md-select>
        </div>

        <div class="col-5" *ngIf="filterType == 'stockpoints'">
          <md-select placeholder="Please select" [(ngModel)]="filterTypeModel.isstockpointDefined">
            <md-option value="yes">YES</md-option>
            <md-option value="no">NO</md-option>
          </md-select>
        </div>

        <div class="col-5" *ngIf="filterType == 'products'">
          <md-form-field class="example-full-width">
            <input mdInput placeholder="Enter product" aria-label="State" [mdAutocomplete]="auto" [formControl]="productsCtrl">
            <md-autocomplete #auto="mdAutocomplete">
              <md-option *ngFor="let prod of filteredProducts | async" [value]="prod.fullname">
                <span>{{prod.pname}} | {{prod.category}} | {{prod.ptype}} </span>
              </md-option>
            </md-autocomplete>
          </md-form-field>
        </div>

        <div class="col-3 align-self-center">
          <i class="fa fa-search cursor fs-18 logo-color search-style" aria-hidden="true" (click)="searchFilter()"></i>
          &nbsp;
          <i class="fa fa-refresh logo-color fs-20" aria-hidden="true" (click)="clearSearch()"></i>
        </div>
      </div>
    </div>

    <div class="col-4 align-self-center">
      <button type="submit" md-raised-button class="" href="javascript:void(0)" (click)="activeDistributors()">Active
      </button> &nbsp;
      <button type="submit" md-raised-button class="" href="javascript:void(0)" (click)="inactiveDistributors()">In-Active
      </button>&nbsp;
      <button type="submit" md-raised-button class="  " [ngClass]="{'btn-primary': tabPanelView === 'bystock'}" href="javascript:void(0)"
        (click)="showTabPanel('bystock')">By Stock </button>&nbsp;
      <i class="fa fa-history logo-color fs-20" title="Reset" (click)="reset()"></i>&nbsp;&nbsp;
      <a class="cursor logo-color " title="Add Distributor">
        <i class="fa fa-plus fs-25 plus-style" (click)="openCreateDialog()" aria-hidden="true"></i>
      </a>&nbsp;

      <!-- <a class="cursor logo-color">
        <i aria-hidden="true" class="fa fa-sliders logo-color" title="Filter" (click)="filterDailogToggle()"></i>
        <div class="filterView" *ngIf="showFilterDailog">
          <div class="">
            <div class="form-group">
              <md-select placeholder="Filter By" name="type" class="full-width left" [(ngModel)]="filterType">
                <md-option value="name">First Name</md-option>
                <md-option value="mobileno">Mobile Number</md-option>
                <md-option value="category">Category</md-option>
                <md-option value="phonetype">Type of phone</md-option>
                <md-option value="address">Area Name</md-option>
                <md-option value="areadefined">Is Area defined</md-option>
                <md-option value="products">Products</md-option>
                <md-option value="stockpoints">Is Stockpoint defined</md-option>
                <md-option value="salesteamassociation">Associated To</md-option>
              </md-select>
            </div>


            <div *ngIf="filterType=='name'">
              <md-form-field class="example-full-width">
                <input class="form-control" mdInput placeholder="Enter First Name" [(ngModel)]="filterTypeModel.firstname"
                  name="firstname">
              </md-form-field>
            </div>

            <div *ngIf="filterType=='mobileno'">
              <md-form-field class="example-full-width">
                <input class="form-control" mdInput placeholder="Enter Customer Mobile Number" [(ngModel)]="filterTypeModel.mobileno"
                  name="mobileno" maxlength="10">
              </md-form-field>
            </div>

            <div class="" *ngIf="filterType == 'category'">
              <md-form-field class="example-full-width">
                <input mdInput placeholder="Enter Category" aria-label="State" [mdAutocomplete]="auto" [formControl]="CategoryCtrl">
                <md-autocomplete #auto="mdAutocomplete">
                  <md-option *ngFor="let cat of filteredcategories | async" [value]="cat.category">
                    <span> {{cat.category}}</span>
                  </md-option>
                </md-autocomplete>
              </md-form-field>

            </div>

            <div class="" *ngIf="filterType == 'phonetype'">
              <md-select placeholder="Type of phone" class="wd-100pc left" name="phonetype" [(ngModel)]="filterTypeModel.typeofphone">
                <md-option value="no_smartphone">No Smartphone</md-option>
                <md-option value="android">Android</md-option>
                <md-option value="ios">Iphone</md-option>
              </md-select>

            </div>

            <div class="" *ngIf="filterType == 'address'">
              <md-form-field class="example-full-width">
                <input class="form-control" mdInput placeholder="Enter Area Name" [(ngModel)]="filterTypeModel.address"
                  name="searchArea">
              </md-form-field>
            </div>

            <div class="" *ngIf="filterType == 'salesteamassociation'">
              
                <md-form-field class="example-full-width">
                    <input mdInput placeholder="Enter sales team name" aria-label="State" [mdAutocomplete]="auto" [formControl]="salesTeamCtrl">
                    <md-autocomplete #auto="mdAutocomplete">
                      <md-option *ngFor="let salesteam of filteredsalesteam | async" [value]="salesteam.fullname">
                        <span> {{salesteam.fullname}}</span>
                      </md-option>
                    </md-autocomplete>
                  </md-form-field>
            </div>

            <div class="" *ngIf="filterType == 'areadefined'">
              <md-select placeholder="Please select" [(ngModel)]="filterTypeModel.isAreaDefined">
                <md-option value="yes">YES</md-option>
                <md-option value="no">NO</md-option>
              </md-select>
            </div>

            <div class="" *ngIf="filterType == 'stockpoints'">
              <md-select placeholder="Please select" [(ngModel)]="filterTypeModel.isstockpointDefined">
                <md-option value="yes">YES</md-option>
                <md-option value="no">NO</md-option>
              </md-select>
            </div>

            <div class="" *ngIf="filterType == 'products'">
              <md-form-field class="example-full-width">
                <input mdInput placeholder="Enter product" aria-label="State" [mdAutocomplete]="auto" [formControl]="productsCtrl">
                <md-autocomplete #auto="mdAutocomplete">
                  <md-option *ngFor="let prod of filteredProducts | async" [value]="prod.fullname">
                    <span>{{prod.pname}} | {{prod.category}} | {{prod.ptype}} </span>
                  </md-option>
                </md-autocomplete>
              </md-form-field>
            </div>

            <div class="input-group pd-10  ">
              <button md-raised-button color="primary" (click)="searchFilter()">Search</button>
              <button md-raised-button color="primary" (click)="clearSearch()">
                <i class="fa fa-filter" aria-hidden="true"></i> Clear Filter
              </button>
            </div>
          </div>
        </div>
      </a> -->
    </div>
  </div>

  <div *ngIf="tabPanelView !== 'bystock'">
    <div id="" class="row pd-15 mg-0">
      <div class="">
        <table class="table table-hover table-striped" style="table-layout:fixed">
          <thead>
            <tr>
              <th width="12%">Name</th>
              <th width="13%">Created By</th>
              <th width="10%">Created Date</th>
              <th width="9%" title="Customer Count">Cust Count</th>
              <th width="10%">Mobile</th>
              <!-- <th width="10%">Email Id</th> -->
              <th width="10%">Refer Code</th>
              <th width="15%">Address</th>
              <th width="13%">Company </th>
              <th width="10%">Assoc. To </th>
              <th width="10%" class="no-th-arrow">Views </th>
            </tr>
          </thead>
          <tbody>
            <tr id="Preordrlist" *ngFor="let dist of distributors; let i = index" [attr.data-index]="i">
              <td class="left capitalize" width="12%">
                <span class="onhovertooltip-150 capitalize" title="{{dist.firstname}} {{dist.lastname}}">
                  <i class="fa fa-thumbs-up green" *ngIf="dist.isactive == '1'" (click)="activateDeactivateDist(dist)" title="click to deactivate"></i>
                  <i class="fa fa-thumbs-down danger" *ngIf="dist.isactive == '0'" (click)="activateDeactivateDist(dist)" title="click to activate"></i>
                  {{dist.firstname}} {{dist.lastname}}</span>
              </td>
              <td class="" width="13%">
                <span *ngIf="dist.usercreatedby" class="onhovertooltip-150 capitalize"> {{dist.usercreatedby.name}}</span>
                <span *ngIf="dist.usercreatedby === null || dist.usercreatedby == ''"> - </span>
              </td>
              <td class="" width="10%">
                <span class="onhovertooltip-100" title="{{dist.timestamp | utcDate}}">{{dist.timestamp | utcDate}}</span>
              </td>
              <td class="left" width="9%">{{dist.customercount}} </td>
              <td class="left numbers" width="10%">
                <span class="onhovertooltip-100" title="{{dist.mobileno}} {{dist.mobileno_one}} {{dist.mobileno_two}}">{{dist.mobileno}}
                  <span *ngIf="dist.mobileno_one || dist.mobileno_two"> {{dist.mobileno_one}} {{dist.mobileno_two}}</span>
                </span>
              </td>
              <!-- <td class="left" width="10%"><span class="onhovertooltip-100" title="{{dist.emailid}}">{{dist.emailid}}</span> </td> -->
              <td class="left" width="10%">{{dist.reference_code}}</td>
              <td class="left capitalize" width="15%">
                <span class="onhovertooltip-180" title="{{dist.address}}">{{dist.address}}</span>
              </td>
              <td class="left capitalize" width="13%">
                <span class="" *ngIf="dist.companyname">{{dist.companyname}}</span>
                <span class="" *ngIf="!dist.companyname"> - </span>
              </td>

              <td class="left capitalize">
                <span *ngIf="dist.salesteaminfo && dist.salesteaminfo.salesteamname">{{dist.salesteaminfo.salesteamname}}</span>
                <span *ngIf="!dist.salesteaminfo"> - </span>
              </td>
              <td class="left" width="10%">
                <div class="dropdown">
                  <button class="dropbtn" [disabled]="dist.usercreatedby && dist.usercreatedby.userid != 'loginId'">View More
                  </button>
                  <div class="dropdown-content" style="right:0;">
                    <div class="row pdbottom-5">
                      <label class="col-md-6" (click)="openUpdateDialog(dist)">
                        <i class="fa fa-edit logo-color cursor" title="Edit Distributor"></i> Edit Distributor
                      </label>
                      <label class="col-md-6" (click)="addProductsConfirmDialog(dist)">
                        <i class="fa fa-plus"></i> Add products</label>
                    </div>
                    <div class="row pdbottom-5">
                      <label class="col-md-6" (click)="viewOrders(dist)">
                        <i class="fa fa-file-text-o logo-color cursor" title="Orders"></i>
                        Orders</label>
                      <label class="col-md-6" (click)="viewSuppliers(dist)">
                        <i class="fa fa-truck logo-color cursor" title="Suppliers"></i> Suppliers</label>
                    </div>
                    <div class="row pdbottom-5">
                      <label class="col-md-6" (click)="viewCustomers(dist)">
                        <i class="fa fa-users logo-color cursor" title="Customers"></i>
                        Customers</label>
                      <label class="col-md-6" (click)="ViewProduct(dist)">
                        <i class="fa fa-gift logo-color cursor" title="Products"></i> Products</label>
                    </div>
                    <div class="row pdbottom-5">
                      <!-- <label class="col-md-6" >
                            <span *ngIf="dist.isactive == '0'"  (click)="activateDeactivateDist(dist)"> <i class="fa fa-ban"></i> Activate </span>
                            <span *ngIf="dist.isactive == '1'" (click)="activateDeactivateDist(dist)"> <i class="fa fa-ban"></i> Deactivate </span>
                    </label> -->

                      <label class="col-md-6" (click)="showFollowUp(dist)">
                        <i class="fa fa-volume-control-phone logo-color cursor" title="Customers"></i> FollowUp
                      </label>

                      <label class="col-md-6" (click)="openMapDialog(dist)">
                        <i class="fa fa-globe logo-color cursor" title="Service area"></i> Service area</label>
                    </div>
                    <div class="row">

                      <label class="col-md-6" (click)="viewStockPoints(dist)">
                        <i class="fa fa-vimeo"></i> Stock Points</label>

                      <label class="col-md-6" (click)="viewPoints(dist)">
                        <i class="fa fa-trophy"></i> Points</label>
                    </div>
                    <div class="row">
                      <label class="col-md-6" (click)="distributorsAvailability(dist)">
                        <i class="fa fa-thumbs-o-up"></i> Availability </label>
                      <label class="col-md-6" (click)="assignToSalesTeam(dist)">
                        <i class="fa fa-check-square-o"></i> Assign To Sales Team </label>
                    </div>


                    <!-- <label class="col-md-6" (click)="addstockDialog(dist)">
                            <i class="fa fa-cart-arrow-down" ></i> Add Stock </label>

                        <label class="col-md-6" (click)="stockHistory(dist)">
                          <i class="fa fa-file-text"> </i> Stock History </label>
                    </div>


                    <div class="row">
                      <label class="col-md-6" (click)="distributorstockStatus(dist)">
                        <i class="fa fa-strikethrough"></i> Stock Status </label>
                    </div> -->
                  </div>
                </div>

              </td>
              <td class="left" class="none">
                <i class="fa fa-file-text-o logo-color cursor" (click)="viewOrders(dist)" title="Orders"> </i>&nbsp;&nbsp;
                <i class="fa fa-truck logo-color cursor" (click)="viewSuppliers(dist)" title="Suppliers"></i>&nbsp;&nbsp;
                <i class="fa fa-users logo-color cursor" (click)="viewCustomers(dist)" title="Customers"> </i>&nbsp;&nbsp;
                <i class="fa fa-gift logo-color cursor" (click)="ViewProduct(dist)" title="Products"></i>&nbsp;&nbsp;
                <i class="fa fa-edit logo-color cursor" title="Edit Distributor" (click)="openUpdateDialog(dist)"></i>
                <i class="fa fa-plus-square-o" title="Add products" (click)="addProductsConfirmDialog(dist)"></i>
                <button *ngIf="dist.isactive == '0'" class="btn btn-link" (click)="activateDeactivateDist(dist)">Activate distributor
                </button>
                <button *ngIf="dist.isactive == '1'" class="btn btn-link warn" (click)="activateDeactivateDist(dist)">Deactivate distributor
                </button>

                <button class="btn btn-link" (click)="openMapDialog(dist)">Service area</button>

                <!-- <i *ngIf="dist.isactive == '1'" class="fa fa-minus-circle warning"  title="Deactivate distributor" (click)="deactivateDistributor(dist)"></i>
                <i *ngIf="dist.isactive == '0'" class="fa fa-check-circle green" title="Activate distributor" (click)="activateDistributor(dist)"></i> -->



                <i class="fa fa-vimeo" title="view stockpoints" (click)="viewStockPoints(dist)"></i>
                <!-- <button class="btn btn-link" (click)="viewOrders(dist)">Orders </button>
            <button class="btn btn-link" (click)="viewSuppliers(dist)">Suppliers </button>
            <button class="btn btn-link" (click)="viewCustomers(dist)"> Customers</button>
            <button class="btn btn-link" (click)="ViewProduct(dist)" >Products</button> -->
              </td>

          </tbody>
        </table>

        <h4 class="warning  capitalize">
          <a href="javascript:void(0);" (click)=getDistributors(false); *ngIf="distributorClickMore">
            <i class="fa fa-cloud-upload" aria-hidden="true"></i> click for more data</a>
        </h4>
        <h4 *ngIf="!distributorClickMore" class="warning">Record Not Available</h4>

      </div>
    </div>
  </div>




  <div class="" *ngIf="tabPanelView === 'bystock'">

    <div id="" class="row pd-15 mg-0">

      <div class="">
        <table class="table table-hover table-striped" style="table-layout:fixed">
          <thead>
            <tr>
              <th width="50%">Name</th>
              <!-- <th width="30%">Stock Count</th> -->
              <th width="50%" class="no-th-arrow">Views </th>
            </tr>
          </thead>
          <tbody>
            <tr id="Preordrlist" *ngFor="let dist of distributors; let i = index" [attr.data-index]="i">

              <td class="left capitalize" width="50%">
                <span class="onhovertooltip-150 capitalize">{{dist.firstname}} {{dist.lastname}}</span>
              </td>
              <!-- <td class="" width="30%">
                count
              </td> -->

              <td class="left" width="50%">
                <div class="dropdown">
                  <button class="dropbtn" [disabled]="dist.usercreatedby && dist.usercreatedby.userid != 'loginId'">View More
                  </button>
                  <div class="dropdown-content" style="right:0;">

                    <div class="row">

                      <label class="col-md-6" (click)="addstockDialog(dist)">
                        <i class="fa fa-cart-arrow-down"></i> Add Stock </label>

                      <label class="col-md-6" (click)="stockHistory(dist)">
                        <i class="fa fa-file-text"> </i> Stock History </label>
                    </div>


                    <div class="row">
                      <label class="col-md-6" (click)="distributorstockStatus(dist)">
                        <i class="fa fa-strikethrough"></i> Stock Status </label>

                      <label class="col-md-6" (click)="ViewProduct(dist)">
                        <i class="fa fa-gift logo-color cursor" title="Products"></i>View Products</label>
                    </div>


                  </div>
                </div>

              </td>



          </tbody>
        </table>



      </div>
    </div>
  </div>
</div>